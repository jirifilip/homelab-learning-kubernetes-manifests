apiVersion: v1
kind: Namespace

metadata:
  name: development
  labels:
    name: development

---
apiVersion: v1
kind: ConfigMap

metadata:
  name: nginx-config
  namespace: development

data: 
  index: |
    <h1>Hello world!</h1>
    <p>This is HTML from Kubernetes ConfigMap</p>

  hello: |
    <h2>Another hello world!<h2>

---
apiVersion: v1
kind: Pod

metadata:
  namespace: development
  name: nginx-pod-test
  labels:
    app: nginx-test

spec:
  containers:
    - name: nginx-test
      image: nginx:latest
      ports:
        - containerPort: 80
      volumeMounts:
        - name: nginx-config-volume
          mountPath: /usr/share/nginx/html

  volumes:
    - name: nginx-config-volume
      configMap:
        name: nginx-config
        items:
          - key: index
            path: index.html
          - key: hello
            path: hello.html

---
apiVersion: v1
kind: Service

metadata:
  namespace: development
  name: nginx-test-service

spec:
  type: ClusterIP

  clusterIP: 10.96.0.9

  selector: 
    app: nginx-test
  
  ports:
    - protocol: TCP
      # As a test, we will create cluster IP on port 400
      port: 4000
      targetPort: 80
